!function(o){"use strict";function e(e,a){var i="",s="",n=o.parseJSON(e);return i+='<div id="wpwhpro-data-editor">',o.isEmptyObject(n)?(i+='<div class="wpwhpro-empty">',i+=a.text.add_first_row_text,i+="</div>"):o.each(n,function(o,e){i+=t(e)}),i+="</div>",s+='<div class="wpwhpro-data-mapping-actions">',s+='<div class="wpwhpro-add-row-button-text wpwhpro-button btn-blue">'+a.text.add_button_text+"</div>",s+="",s+="",s+="</div>",i+=s}function t(e){var t="",i="Add new key";return t+='<div class="single-data-row">',t+='<div alt="f182" class="data-delete-icon dashicons dashicons-trash"></div>',t+='<div alt="f545" class="data-move-icon dashicons dashicons-move"></div>',"empty"===e?(t+='<div class="data-new-key-wrapper">',t+='<input class="data-new-key" name="data-new-key" placeholder="'+i+'" />',t+="</div>",t+='<div class="data-connector">'+a()+"</div>",t+='<ul class="data-income-keys"></ul>'):(t+='<div class="data-new-key-wrapper">',t+='<input class="data-new-key" name="data-new-key" value="'+e.new_key+'" placeholder="'+i+'" />',t+="</div>",t+='<div class="data-connector">'+a()+"</div>",t+='<ul class="data-income-keys">',o.each(e.singles,function(o,e){t+=r(e)}),t+="",t+="</ul>"),t+='<div class="wpwhpro-add-key-button-text wpwhpro-button btn-blue">Add Key</div>',t+="</div>"}function a(){return'<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg  PUBLIC \'-//W3C//DTD SVG 1.1//EN\'  \'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\'><svg version="1.1" viewBox="0 0 640 640" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="a" d="m34.98 270.03h428.25c-80.77-80.95-125.65-125.93-134.62-134.92-6.6-6.59-10.21-15.52-10.21-24.88 0-9.37 3.61-18.23 10.21-24.83 2.09-2.1 18.85-18.86 20.94-20.96 6.59-6.59 15.37-10.23 24.73-10.23 9.37 0 18.15 3.62 24.74 10.2 23.07 23.08 207.7 207.69 230.78 230.76 6.61 6.62 10.23 15.43 10.2 24.8 0.03 9.42-3.59 18.23-10.2 24.84-23.08 23.07-207.71 207.7-230.78 230.78-6.59 6.58-15.37 10.2-24.74 10.2-9.36 0-18.14-3.63-24.73-10.2-2.09-2.1-18.85-18.87-20.94-20.96-6.6-6.58-10.21-15.36-10.21-24.73 0-9.36 3.61-17.68 10.21-24.26 9.07-9.05 54.46-54.27 136.14-135.68h-429.25c-19.29 0-35.5-16.63-35.5-35.9v-29.65c0-19.27 16.69-34.6 35.98-34.6-0.14 0.03-0.47 0.1-1 0.22z"/></defs><use fill="#000000" xlink:href="#a"/><use fill-opacity="0" stroke="#000000" stroke-opacity="0" xlink:href="#a"/></svg>'}function i(){o(".data-income-keys").sortable({connectWith:".wpwhpro-single-row",delay:150}),o("#wpwhpro-data-editor").sortable({connectWith:".single-data-row",delay:150})}function s(){var o="";return o+='<div class="wpwhpro-data-mapping-add-template-wrapper">',o+='<input id="wpwhpro-data-mapping-add-template-name" type="text" />',o+='<div class="wpwhpro-add-template-button wpwhpro-button btn-blue">Add Template</div>',o+="",o+="",o+="</div>"}function n(){window.location=window.location.href,location.reload()}function r(o){var e="",t="Add old key";return e+='<li class="wpwhpro-single-row">',e+="empty"==o?'<input class="wpwhpro-single-row-input" name="data-income-key" placeholder="'+t+'" />':'<input class="wpwhpro-single-row-input" name="data-income-key" value="'+o+'" placeholder="'+t+'" />',e+='<div class="wpwhpro-single-row-key-actions">',e+='<div class="wpwhpro-delete-single-row-key"><div alt="f182" class="dashicons dashicons-trash"></div></div>',e+='<div class="wpwhpro-move-single-row-key"><div alt="f545" class="dashicons dashicons-move"></div></div>',e+="</div>",e+="</li>"}function c(){var e=o("#wpwhpro-data-editor .data-new-key").map(function(){return{new_key:o(this).val(),singles:o(this).parent().parent().find(".wpwhpro-single-row-input").map(function(){return o(this).val()}).get()}}).get();return e}o(document).on("click",".ironikus-refresh",function(){location.reload()});var l=function(){var e=o(".irnks-accordion"),t=e.find(".irnks-accordion-header"),a=(o(".irnks-accordion-item"),{speed:400,oneOpen:!1});return{init:function(e){t.on("click",function(){l.toggle(o(this))}),o.extend(a,e),a.oneOpen&&o(".irnks-accordion-item.active").length>1&&o(".irnks-accordion-item.active:not(:first)").removeClass("active"),o(".irnks-accordion-item.active").find("> .irnks-accordion-body").show()},toggle:function(o){o.closest(".irnks-accordion-item").toggleClass("active"),o.next().stop().slideToggle(a.speed)}}}();o(document).ready(function(){l.init({speed:300,oneOpen:!0})}),o(".ironikus-save").on("click",function(){var e=o(this);if(!o(e).children(".ironikus-loader").hasClass("active")){o(e).children(".ironikus-save-text").toggleClass("active"),o(e).children(".ironikus-loader").toggleClass("active");var t=o(e).attr("ironikus-webhook-trigger"),a=o(e).attr("ironikus-webhook-callback"),i=o("#ironikus-webhook-url-"+t).val(),s=o("#ironikus-webhook-slug-"+t).val(),n=o("#ironikus-webhook-current-url").val();o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_add_webhook_trigger",webhook_url:i,webhook_slug:s,webhook_group:t,webhook_callback:a,current_url:n,ironikus_nonce:ironikus.ajax_nonce},success:function(a){var i=o.parseJSON(a);setTimeout(function(){if(o(e).children(".ironikus-save-text").toggleClass("active"),o(e).children(".ironikus-loader").toggleClass("active"),o("#ironikus-webhook-url-"+t).val(""),o("#ironikus-webhook-slug-"+t).val(""),"false"!=i.success&&0!=i.success){o(e).css({background:"#00a73f"});var a='<tr id="ironikus-webhook-id-'+i.webhook+'"><td>'+i.webhook+"</td><td>";a+='<input class="ironikus-webhook-input" type="text" name="ironikus_wp_webhooks_pro_webhook_url" value="'+i.webhook_url+'" readonly /><br>',a+='</td><td><div class="ironikus-element-actions">',a+='<span class="ironikus-delete" ironikus-delete="'+i.webhook+'" ironikus-group="'+i.webhook_group+'" >Delete</span><br>',a+='<p class="ironikus-status-action active" ironikus-webhook-status="active" ironikus-webhook-group="'+i.webhook_group+'" ironikus-webhook-slug="'+i.webhook+'">Deactivate</p>',a+='<span class="ironikus-refresh">Refresh for Settings</span>',""!=i.webhook_callback&&(a+='<br><span class="ironikus-send-demo" ironikus-demo-data-callback="'+i.webhook_callback+'" ironikus-webhook="'+i.webhook+'" ironikus-group="'+i.webhook_group+'" >Send demo</span>'),a+="</div></td></tr>",o(".ironikus-webhook-table.ironikus-group-"+t+" > tbody").append(a)}else o(e).css({background:"#a70000"}),confirm(i.msg)},200),setTimeout(function(){o(e).css({background:""})},2700)},error:function(t){setTimeout(function(){o(e).children(".ironikus-save-text").toggleClass("active"),o(e).children(".ironikus-loader").toggleClass("active"),o(e).css({background:"#a70000"})},200),setTimeout(function(){o(e).css({background:""})},2700)}})}}),o(".ironikus-action-save").on("click",function(){var e=o(this),t=o("#ironikus-webhook-action-name").val();t&&(o(e).children(".ironikus-loader").hasClass("active")||(o(e).children(".ironikus-save-text").toggleClass("active"),o(e).children(".ironikus-loader").toggleClass("active"),o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_add_webhook_action",webhook_slug:t,ironikus_nonce:ironikus.ajax_nonce},success:function(t){var a=o.parseJSON(t);console.log(a),setTimeout(function(){if(o(e).children(".ironikus-save-text").toggleClass("active"),o(e).children(".ironikus-loader").toggleClass("active"),"false"!=a.success&&0!=a.success){o(e).css({background:"#00a73f"});var t='<tr id="webhook-action-'+a.webhook+'"><td>'+a.webhook+"</td>";t+="<td>",t+='<input class="ironikus-webhook-input" type="text" name="ironikus_wp_webhooks_pro_webhook_url" value="'+a.webhook_url+'" readonly /><br>',t+="</td>",t+="<td>",t+='<div class="ironikus-element-actions">',t+='<p class="ironikus-delete-action" ironikus-webhook-slug="'+a.webhook+'">'+a.webhook_action_delete_name+"</p>",t+='<p class="ironikus-status-action active" ironikus-webhook-status="active" ironikus-webhook-slug="'+a.webhook+'">Deactivate</p>',t+='<span class="ironikus-refresh">Refresh for Settings</span>',t+="</div>",t+="</td>",t+="</tr>",o(".ironikus-webhook-table.ironikus-webhook-action-table > tbody").append(t),o("#ironikus-webhook-action-name").val("")}else o(e).css({background:"#a70000"})},200),setTimeout(function(){o(e).css({background:""})},2700)},error:function(t){setTimeout(function(){o(e).children(".ironikus-save-text").toggleClass("active"),o(e).children(".ironikus-loader").toggleClass("active"),o(e).css({background:"#a70000"})},200),setTimeout(function(){o(e).css({background:""})},2700)}})))}),o(document).on("click",".ironikus-delete",function(){if(confirm("Are you sure you want to delete this webhook?")){var e=this,t=o(e).attr("ironikus-delete"),a=o(e).attr("ironikus-group");o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_remove_webhook_trigger",webhook:t,webhook_group:a,ironikus_nonce:ironikus.ajax_nonce},success:function(e){var a=o.parseJSON(e);"false"!=a.success&&o("#ironikus-webhook-id-"+t).remove()},error:function(o){console.log(o)}})}}),o(document).on("click",".ironikus-delete-action",function(){if(confirm("Are you sure you want to delete this webhook?")){var e=this,t=o(e).attr("ironikus-webhook-slug");o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_remove_webhook_action",webhook:t,ironikus_nonce:ironikus.ajax_nonce},success:function(e){var a=o.parseJSON(e);console.log(e),"false"!=a.success&&o("#webhook-action-"+t).remove()},error:function(o){console.log(o)}})}}),o(document).on("click",".ironikus-status-action",function(){var e=this,t=o(".ironikus-status-action");if(!t.hasClass("loading")){t.addClass("loading");var a=o(e).attr("ironikus-webhook-slug"),i=o(e).attr("ironikus-webhook-group"),s=o(e).attr("ironikus-webhook-status");o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_change_status_webhook_action",webhook:a,webhook_status:s,webhook_group:i,ironikus_nonce:ironikus.ajax_nonce},success:function(a){var i=o.parseJSON(a);t.removeClass("loading"),"false"!=i.success&&0!=i.success&&(setTimeout(function(){o(e).text(i.new_status_name),o(e).attr("ironikus-webhook-status",i.new_status),o(e).toggleClass(s,i.new_status),o(e).css("false"!=i.success?{color:"#00a73f"}:{color:"#a70000"})},200),setTimeout(function(){o(e).css({color:""})},2700))},error:function(o){console.log(o)}})}}),o(document).on("click",".ironikus-send-demo",function(){var e=this,t=o(e).attr("ironikus-webhook"),a=o(e).attr("ironikus-group"),i=o(e).attr("ironikus-demo-data-callback");o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_test_webhook_trigger",webhook:t,webhook_group:a,webhook_callback:i,ironikus_nonce:ironikus.ajax_nonce},success:function(t){var a=o.parseJSON(t);console.log(a),setTimeout(function(){o(e).css("false"!=a.success?{color:"#00a73f"}:{color:"#a70000"})},200),setTimeout(function(){o(e).css({color:""})},2700)},error:function(o){console.log(o)}})}),o(document).on("click","#TB_ajaxContent .ironikus-submit-settings-form",function(e){e.preventDefault();var t=this,a=o(t).attr("webhook-id"),i=o(t).attr("webhook-group"),s=o("#ironikus-webhook-form-"+a).serialize();o(t).children(".ironikus-loader").hasClass("active")||(o(t).children(".ironikus-save-text").toggleClass("active"),o(t).children(".ironikus-loader").toggleClass("active"),o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_save_webhook_trigger_settings",webhook_id:a,webhook_group:i,trigger_settings:s,ironikus_nonce:ironikus.ajax_nonce},success:function(e){setTimeout(function(){o(t).children(".ironikus-save-text").toggleClass("active"),o(t).children(".ironikus-loader").toggleClass("active"),o(t).css({background:"#00a73f"})},200),setTimeout(function(){o(t).css({background:""})},2700),console.log(e)},error:function(o){console.log(o)}}))}),o(document).on("click","#TB_ajaxContent .ironikus-actions-submit-data-mapping-form",function(e){e.preventDefault();var t=this,a=o(t).attr("webhook-id"),i=o("#ironikus-webhook-action-form-"+a).serialize();o(t).children(".ironikus-loader").hasClass("active")||(o(t).children(".ironikus-save-text").toggleClass("active"),o(t).children(".ironikus-loader").toggleClass("active"),o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_save_webhook_action_settings",webhook_id:a,action_settings:i,ironikus_nonce:ironikus.ajax_nonce},success:function(e){setTimeout(function(){o(t).children(".ironikus-save-text").toggleClass("active"),o(t).children(".ironikus-loader").toggleClass("active"),o(t).css({background:"#00a73f"})},200),setTimeout(function(){o(t).css({background:""})},2700),console.log(e)},error:function(o){console.log(o)}}))}),o(document).on("change","#wpwhpro-data-mapping-template-select",function(t){if(!o("#wpwhpro-data-mapper-template-loader-img").hasClass("active")){o("#wpwhpro-data-mapper-template-loader-img").addClass("active");var a=this,s=o(a).val(),n="";s&&"empty"!==s?o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_load_data_mapping_data",data_mapping_id:s,ironikus_nonce:ironikus.ajax_nonce},success:function(t){var a=o.parseJSON(t),n="";console.log(a),o("#wpwhpro-data-mapper-template-loader-img").removeClass("active"),o("#wpwhpro-delete-template-button").addClass("active").attr("wpwhpro-mapping-id",s),o("#wpwhpro-save-template-button").addClass("active").attr("wpwhpro-mapping-id",s),("true"===a.success||a.success===!0)&&(n=e(a.data.template,a),o("#wpwhpro-data-mapping-wrapper").html(n),i())},error:function(e){o("#wpwhpro-data-mapper-template-loader-img").removeClass("active"),console.log(e)}}):(o("#wpwhpro-data-mapper-template-loader-img").removeClass("active"),o("#wpwhpro-delete-template-button").removeClass("active"),o("#wpwhpro-save-template-button").removeClass("active"),n+='<div class="wpwhpro-empty">',n+="Please choose a template first.",n+="</div>",o("#wpwhpro-data-mapping-wrapper").html(n))}}),o(document).ready(function(){var e="";e+=s(),e+='<div id="wpwhpro-save-template-button" class="wpwhpro-button btn-blue">Save Template</div>',e+='<div id="wpwhpro-delete-template-button" class="wpwhpro-button btn-red">Delete Template</div>',o("#wpwhpro-data-mapping-actions").html(e)}),o(document).on("click",".wpwhpro-add-row-button-text",function(){o("#wpwhpro-data-editor .wpwhpro-empty").length&&o("#wpwhpro-data-editor").html("");var e=t("empty");o("#wpwhpro-data-editor").append(e),i()}),o(document).on("click",".wpwhpro-delete-single-row-key",function(){var e=this;o(e).parent().parent(".wpwhpro-single-row").remove()}),o(document).on("click",".data-delete-icon",function(){if(confirm("Are you sure you want to delete this row?")){var e=this;o(e).parent(".single-data-row").remove()}}),o(document).on("click",".wpwhpro-add-key-button-text",function(){var e=this,t=r("empty");o(e).prev(".data-income-keys").append(t),i()}),o(document).on("click","#wpwhpro-save-template-button",function(){var e=this,t=o(e).attr("wpwhpro-mapping-id"),a=c();console.log(t),console.log(a),t&&o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_save_data_mapping_template",data_mapping_id:t,data_mapping_json:a,ironikus_nonce:ironikus.ajax_nonce},success:function(t){var a=o.parseJSON(t);("true"===a.success||a.success===!0)&&(setTimeout(function(){o(e).css({background:"#00a73f"})},200),setTimeout(function(){o(e).css({background:""})},2700))},error:function(o){console.log(o)}})}),o(document).on("click","#wpwhpro-delete-template-button",function(){var e=this,t=o(e).attr("wpwhpro-mapping-id"),a="";t&&"empty"!==t&&confirm("Are you sure you want to delete this template?")&&o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_delete_data_mapping_template",data_mapping_id:t,ironikus_nonce:ironikus.ajax_nonce},success:function(e){var i=o.parseJSON(e);("true"===i.success||i.success===!0)&&(o("#wpwhpro-delete-template-button").removeClass("active"),o("#wpwhpro-save-template-button").removeClass("active"),o("#wpwhpro-data-mapping-template-select option[value='"+t+"']").remove(),a+='<div class="wpwhpro-empty">',a+="Please choose a template first.",a+="</div>",o("#wpwhpro-data-mapping-wrapper").html(a))},error:function(o){console.log(o)}})}),o(document).on("click",".wpwhpro-add-template-button",function(){var e=o("#wpwhpro-data-mapping-add-template-name").val();e&&o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_add_data_mapping_template",data_mapping_name:e,ironikus_nonce:ironikus.ajax_nonce},success:function(e){var t=o.parseJSON(e);("true"===t.success||t.success===!0)&&confirm("Reload required. Want to reload now?")&&n()},error:function(o){console.log(o)}})}),o(document).on({mouseover:function(){var e=this;o(e).find(".wpwhpro-single-row-key-actions").addClass("active")},mouseleave:function(){var e=this;o(e).find(".wpwhpro-single-row-key-actions").removeClass("active")}},".wpwhpro-single-row"),o(document).on("click",".log-element",function(){var e=this,t=o(e).attr("wpwhpro-log-id"),a=o("#wpwhpro-log-content-"+t).html(),i=o("#wpwhpro-log-json-"+t).text();o("#wpwhpro-log-content").html(a),o("#wpwhpro-log-json").jsonBrowse(o.parseJSON(i))})}(jQuery),function(o){function e(o){return o instanceof Object&&Object.keys(o).length>0}function t(o){var e=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return e.test(o)}function a(o,i){if(html="","string"==typeof o)o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),html+=t(o)?'<a href="'+o+'" class="json-string">'+o+"</a>":'<span class="json-string">"'+o+'"</span>';else if("number"==typeof o)html+='<span class="json-literal">'+o+"</span>";else if("boolean"==typeof o)html+='<span class="json-literal">'+o+"</span>";else if(null===o)html+='<span class="json-literal">null</span>';else if(o instanceof Array)if(o.length>0){html+='[<ol class="json-array">';for(var s=0;s<o.length;++s)html+="<li>",e(o[s])&&(html+='<a href class="json-toggle"></a>'),html+=a(o[s],i),s<o.length-1&&(html+=","),html+="</li>";html+="</ol>]"}else html+="[]";else if("object"==typeof o){var n=Object.keys(o).length;if(n>0){html+='{<ul class="json-dict">';for(var r in o)if(o.hasOwnProperty(r)){html+="<li>";var c=i.withQuotes?'<span class="json-string">"'+r+'"</span>':r;html+=e(o[r])?'<a href class="json-toggle">'+c+"</a>":c,html+=": "+a(o[r],i),--n>0&&(html+=","),html+="</li>"}html+="</ul>}"}else html+="{}"}return html}o.fn.jsonBrowse=function(t,i){return i=i||{},this.each(function(){var s=a(t,i);e(t)&&(s='<a href class="json-toggle"></a>'+s),o(this).html(s),o(this).off("click"),o(this).on("click","a.json-toggle",function(){var e=o(this).toggleClass("collapsed").siblings("ul.json-dict, ol.json-array");if(e.toggle(),e.is(":visible"))e.siblings(".json-placeholder").remove();else{var t=e.children("li").length,a=t+(t>1?" items":" item");e.after('<a href class="json-placeholder">'+a+"</a>")}return!1}),o(this).on("click","a.json-placeholder",function(){return o(this).siblings("a.json-toggle").click(),!1}),1==i.collapsed&&o(this).find("a.json-toggle").click()})}}(jQuery);