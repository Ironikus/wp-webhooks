!function(e){"use strict";function o(o,a){var i="",n="",s=e.parseJSON(o);return i+='<div id="wpwhpro-data-editor">',e.isEmptyObject(s)?(i+='<div class="wpwhpro-empty">',i+=a.text.add_first_row_text,i+="</div>"):e.each(s,function(e,o){i+=t(o)}),i+="</div>",n+='<div class="wpwhpro-data-mapping-actions">',n+='<div class="wpwhpro-add-row-button-text wpwhpro-button btn-blue">'+a.text.add_button_text+"</div>",n+="",n+="",n+="</div>",i+=n}function t(o){var t="",i="Add new key";return t+='<div class="single-data-row">',t+='<div alt="f182" class="data-delete-icon dashicons dashicons-trash"></div>',t+='<div alt="f545" class="data-move-icon dashicons dashicons-move"></div>',"empty"===o?(t+='<div class="data-new-key-wrapper">',t+='<input class="data-new-key" name="data-new-key" placeholder="'+i+'" />',t+="</div>",t+='<div class="data-connector">'+a()+"</div>",t+='<ul class="data-income-keys"></ul>'):(t+='<div class="data-new-key-wrapper">',t+='<input class="data-new-key" name="data-new-key" value="'+o.new_key+'" placeholder="'+i+'" />',t+="</div>",t+='<div class="data-connector">'+a()+"</div>",t+='<ul class="data-income-keys">',e.each(o.singles,function(e,o){t+=r(o)}),t+="",t+="</ul>"),t+='<div class="wpwhpro-add-key-button-text wpwhpro-button btn-blue">Add Key</div>',t+="</div>"}function a(){return'<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg  PUBLIC \'-//W3C//DTD SVG 1.1//EN\'  \'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\'><svg version="1.1" viewBox="0 0 640 640" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="a" d="m34.98 270.03h428.25c-80.77-80.95-125.65-125.93-134.62-134.92-6.6-6.59-10.21-15.52-10.21-24.88 0-9.37 3.61-18.23 10.21-24.83 2.09-2.1 18.85-18.86 20.94-20.96 6.59-6.59 15.37-10.23 24.73-10.23 9.37 0 18.15 3.62 24.74 10.2 23.07 23.08 207.7 207.69 230.78 230.76 6.61 6.62 10.23 15.43 10.2 24.8 0.03 9.42-3.59 18.23-10.2 24.84-23.08 23.07-207.71 207.7-230.78 230.78-6.59 6.58-15.37 10.2-24.74 10.2-9.36 0-18.14-3.63-24.73-10.2-2.09-2.1-18.85-18.87-20.94-20.96-6.6-6.58-10.21-15.36-10.21-24.73 0-9.36 3.61-17.68 10.21-24.26 9.07-9.05 54.46-54.27 136.14-135.68h-429.25c-19.29 0-35.5-16.63-35.5-35.9v-29.65c0-19.27 16.69-34.6 35.98-34.6-0.14 0.03-0.47 0.1-1 0.22z"/></defs><use fill="#000000" xlink:href="#a"/><use fill-opacity="0" stroke="#000000" stroke-opacity="0" xlink:href="#a"/></svg>'}function i(){e(".data-income-keys").sortable({connectWith:".wpwhpro-single-row",delay:150}),e("#wpwhpro-data-editor").sortable({connectWith:".single-data-row",delay:150})}function n(){var e="";return e+='<div class="wpwhpro-data-mapping-add-template-wrapper">',e+='<input id="wpwhpro-data-mapping-add-template-name" type="text" />',e+='<div class="wpwhpro-add-template-button wpwhpro-button btn-blue">Add Template</div>',e+="",e+="",e+="</div>"}function s(){window.location=window.location.href,location.reload()}function r(e){var o="",t="Add old key";return o+='<li class="wpwhpro-single-row">',o+="empty"==e?'<input class="wpwhpro-single-row-input" name="data-income-key" placeholder="'+t+'" />':'<input class="wpwhpro-single-row-input" name="data-income-key" value="'+e+'" placeholder="'+t+'" />',o+='<div class="wpwhpro-single-row-key-actions">',o+='<div class="wpwhpro-delete-single-row-key"><div alt="f182" class="dashicons dashicons-trash"></div></div>',o+='<div class="wpwhpro-move-single-row-key"><div alt="f545" class="dashicons dashicons-move"></div></div>',o+="</div>",o+="</li>"}function c(){var o=e("#wpwhpro-data-editor .data-new-key").map(function(){return{new_key:e(this).val(),singles:e(this).parent().parent().find(".wpwhpro-single-row-input").map(function(){return e(this).val()}).get()}}).get();return o}e(document).on("click",".ironikus-refresh",function(){location.reload()});var l=function(){var o=e(".irnks-accordion"),t=o.find(".irnks-accordion-header"),a=(e(".irnks-accordion-item"),{speed:400,oneOpen:!1});return{init:function(o){t.on("click",function(){l.toggle(e(this))}),e.extend(a,o),a.oneOpen&&e(".irnks-accordion-item.active").length>1&&e(".irnks-accordion-item.active:not(:first)").removeClass("active"),e(".irnks-accordion-item.active").find("> .irnks-accordion-body").show()},toggle:function(e){e.closest(".irnks-accordion-item").toggleClass("active"),e.next().stop().slideToggle(a.speed)}}}();e(document).ready(function(){l.init({speed:300,oneOpen:!0})}),e(".ironikus-save").on("click",function(){var o=e(this);if(!e(o).children(".ironikus-loader").hasClass("active")){e(o).children(".ironikus-save-text").toggleClass("active"),e(o).children(".ironikus-loader").toggleClass("active");var t=e(o).attr("ironikus-webhook-trigger"),a=e(o).attr("ironikus-webhook-callback"),i=e("#ironikus-webhook-url-"+t).val(),n=e("#ironikus-webhook-current-url").val();e.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_add_webhook_trigger",webhook_url:i,webhook_group:t,webhook_callback:a,current_url:n,ironikus_nonce:ironikus.ajax_nonce},success:function(a){var i=e.parseJSON(a);setTimeout(function(){if(e(o).children(".ironikus-save-text").toggleClass("active"),e(o).children(".ironikus-loader").toggleClass("active"),"false"!=i.success){e(o).css({background:"#00a73f"});var a='<tr id="ironikus-webhook-id-'+i.webhook+'"><td>';a+='<input class="ironikus-webhook-input" type="text" name="ironikus_wp_webhooks_pro_webhook_url" value="'+i.webhook_url+'" readonly /><br>',a+='</td><td><div class="ironikus-element-actions">',a+='<span class="ironikus-delete" ironikus-delete="'+i.webhook+'" ironikus-group="'+i.webhook_group+'" >Delete</span><br>',a+='<span class="ironikus-refresh">Refresh for Settings</span>',""!=i.webhook_callback&&(a+='<br><span class="ironikus-send-demo" ironikus-demo-data-callback="'+i.webhook_callback+'" ironikus-webhook="'+i.webhook+'" ironikus-group="'+i.webhook_group+'" >Send demo</span>'),a+="</div></td></tr>",e(".ironikus-webhook-table.ironikus-group-"+t+" > tbody").append(a)}else e(o).css({background:"#a70000"})},200),setTimeout(function(){e(o).css({background:""})},2700)},error:function(t){setTimeout(function(){e(o).children(".ironikus-save-text").toggleClass("active"),e(o).children(".ironikus-loader").toggleClass("active"),e(o).css({background:"#a70000"})},200),setTimeout(function(){e(o).css({background:""})},2700)}})}}),e(".ironikus-action-save").on("click",function(){var o=e(this),t=e("#ironikus-webhook-action-name").val();t&&(e(o).children(".ironikus-loader").hasClass("active")||(e(o).children(".ironikus-save-text").toggleClass("active"),e(o).children(".ironikus-loader").toggleClass("active"),e.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_add_webhook_action",webhook_slug:t,ironikus_nonce:ironikus.ajax_nonce},success:function(t){var a=e.parseJSON(t);console.log(a),setTimeout(function(){if(e(o).children(".ironikus-save-text").toggleClass("active"),e(o).children(".ironikus-loader").toggleClass("active"),"false"!=a.success&&0!=a.success){e(o).css({background:"#00a73f"});var t='<tr id="webhook-action-'+a.webhook+'"><td>'+a.webhook+"</td>";t+="<td>",t+='<input class="ironikus-webhook-input" type="text" name="ironikus_wp_webhooks_pro_webhook_url" value="'+a.webhook_url+'" readonly /><br>',t+="</td>",t+="<td>",t+='<div class="ironikus-element-actions">',t+='<p class="ironikus-delete-action" ironikus-webhook-slug="'+a.webhook+'">'+a.webhook_action_delete_name+"</p>",t+='<span class="ironikus-refresh">Refresh for Settings</span>',t+="</div>",t+="</td>",t+="</tr>",e(".ironikus-webhook-table.ironikus-webhook-action-table > tbody").append(t),e("#ironikus-webhook-action-name").val("")}else e(o).css({background:"#a70000"})},200),setTimeout(function(){e(o).css({background:""})},2700)},error:function(t){setTimeout(function(){e(o).children(".ironikus-save-text").toggleClass("active"),e(o).children(".ironikus-loader").toggleClass("active"),e(o).css({background:"#a70000"})},200),setTimeout(function(){e(o).css({background:""})},2700)}})))}),e(document).on("click",".ironikus-delete",function(){if(confirm("Are you sure you want to delete this webhook?")){var o=this,t=e(o).attr("ironikus-delete"),a=e(o).attr("ironikus-group");e.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_remove_webhook_trigger",webhook:t,webhook_group:a,ironikus_nonce:ironikus.ajax_nonce},success:function(o){var a=e.parseJSON(o);"false"!=a.success&&e("#ironikus-webhook-id-"+t).remove()},error:function(e){console.log(e)}})}}),e(document).on("click",".ironikus-delete-action",function(){if(confirm("Are you sure you want to delete this webhook?")){var o=this,t=e(o).attr("ironikus-webhook-slug");e.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_remove_webhook_action",webhook:t,ironikus_nonce:ironikus.ajax_nonce},success:function(o){var a=e.parseJSON(o);console.log(o),"false"!=a.success&&e("#webhook-action-"+t).remove()},error:function(e){console.log(e)}})}}),e(document).on("click",".ironikus-send-demo",function(){var o=this,t=e(o).attr("ironikus-webhook"),a=e(o).attr("ironikus-group"),i=e(o).attr("ironikus-demo-data-callback");e.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_test_webhook_trigger",webhook:t,webhook_group:a,webhook_callback:i,ironikus_nonce:ironikus.ajax_nonce},success:function(t){var a=e.parseJSON(t);console.log(a),setTimeout(function(){e(o).css("false"!=a.success?{color:"#00a73f"}:{color:"#a70000"})},200),setTimeout(function(){e(o).css({color:""})},2700)},error:function(e){console.log(e)}})}),e(document).on("click","#TB_ajaxContent .ironikus-submit-settings-form",function(o){o.preventDefault();var t=this,a=e(t).attr("webhook-id"),i=e(t).attr("webhook-group"),n=e("#ironikus-webhook-form-"+a).serialize();e(t).children(".ironikus-loader").hasClass("active")||(e(t).children(".ironikus-save-text").toggleClass("active"),e(t).children(".ironikus-loader").toggleClass("active"),e.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_save_webhook_trigger_settings",webhook_id:a,webhook_group:i,trigger_settings:n,ironikus_nonce:ironikus.ajax_nonce},success:function(o){setTimeout(function(){e(t).children(".ironikus-save-text").toggleClass("active"),e(t).children(".ironikus-loader").toggleClass("active"),e(t).css({background:"#00a73f"})},200),setTimeout(function(){e(t).css({background:""})},2700),console.log(o)},error:function(e){console.log(e)}}))}),e(document).on("click","#TB_ajaxContent .ironikus-actions-submit-data-mapping-form",function(o){o.preventDefault();var t=this,a=e(t).attr("webhook-id"),i=e("#ironikus-webhook-action-form-"+a).serialize();e(t).children(".ironikus-loader").hasClass("active")||(e(t).children(".ironikus-save-text").toggleClass("active"),e(t).children(".ironikus-loader").toggleClass("active"),e.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_save_webhook_action_settings",webhook_id:a,action_settings:i,ironikus_nonce:ironikus.ajax_nonce},success:function(o){setTimeout(function(){e(t).children(".ironikus-save-text").toggleClass("active"),e(t).children(".ironikus-loader").toggleClass("active"),e(t).css({background:"#00a73f"})},200),setTimeout(function(){e(t).css({background:""})},2700),console.log(o)},error:function(e){console.log(e)}}))}),e(document).on("change","#wpwhpro-data-mapping-template-select",function(t){if(!e("#wpwhpro-data-mapper-template-loader-img").hasClass("active")){e("#wpwhpro-data-mapper-template-loader-img").addClass("active");var a=this,n=e(a).val(),s="";n&&"empty"!==n?e.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_load_data_mapping_data",data_mapping_id:n,ironikus_nonce:ironikus.ajax_nonce},success:function(t){var a=e.parseJSON(t),s="";console.log(a),e("#wpwhpro-data-mapper-template-loader-img").removeClass("active"),e("#wpwhpro-delete-template-button").addClass("active").attr("wpwhpro-mapping-id",n),e("#wpwhpro-save-template-button").addClass("active").attr("wpwhpro-mapping-id",n),("true"===a.success||a.success===!0)&&(s=o(a.data.template,a),e("#wpwhpro-data-mapping-wrapper").html(s),i())},error:function(o){e("#wpwhpro-data-mapper-template-loader-img").removeClass("active"),console.log(o)}}):(e("#wpwhpro-data-mapper-template-loader-img").removeClass("active"),e("#wpwhpro-delete-template-button").removeClass("active"),e("#wpwhpro-save-template-button").removeClass("active"),s+='<div class="wpwhpro-empty">',s+="Please choose a template first.",s+="</div>",e("#wpwhpro-data-mapping-wrapper").html(s))}}),e(document).ready(function(){var o="";o+=n(),o+='<div id="wpwhpro-save-template-button" class="wpwhpro-button btn-blue">Save Template</div>',o+='<div id="wpwhpro-delete-template-button" class="wpwhpro-button btn-red">Delete Template</div>',e("#wpwhpro-data-mapping-actions").html(o)}),e(document).on("click",".wpwhpro-add-row-button-text",function(){e("#wpwhpro-data-editor .wpwhpro-empty").length&&e("#wpwhpro-data-editor").html("");var o=t("empty");e("#wpwhpro-data-editor").append(o),i()}),e(document).on("click",".wpwhpro-delete-single-row-key",function(){var o=this;e(o).parent().parent(".wpwhpro-single-row").remove()}),e(document).on("click",".data-delete-icon",function(){if(confirm("Are you sure you want to delete this row?")){var o=this;e(o).parent(".single-data-row").remove()}}),e(document).on("click",".wpwhpro-add-key-button-text",function(){var o=this,t=r("empty");e(o).prev(".data-income-keys").append(t),i()}),e(document).on("click","#wpwhpro-save-template-button",function(){var o=this,t=e(o).attr("wpwhpro-mapping-id"),a=c();console.log(t),console.log(a),t&&e.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_save_data_mapping_template",data_mapping_id:t,data_mapping_json:a,ironikus_nonce:ironikus.ajax_nonce},success:function(t){var a=e.parseJSON(t);("true"===a.success||a.success===!0)&&(setTimeout(function(){e(o).css({background:"#00a73f"})},200),setTimeout(function(){e(o).css({background:""})},2700))},error:function(e){console.log(e)}})}),e(document).on("click","#wpwhpro-delete-template-button",function(){var o=this,t=e(o).attr("wpwhpro-mapping-id"),a="";t&&"empty"!==t&&confirm("Are you sure you want to delete this template?")&&e.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_delete_data_mapping_template",data_mapping_id:t,ironikus_nonce:ironikus.ajax_nonce},success:function(o){var i=e.parseJSON(o);("true"===i.success||i.success===!0)&&(e("#wpwhpro-delete-template-button").removeClass("active"),e("#wpwhpro-save-template-button").removeClass("active"),e("#wpwhpro-data-mapping-template-select option[value='"+t+"']").remove(),a+='<div class="wpwhpro-empty">',a+="Please choose a template first.",a+="</div>",e("#wpwhpro-data-mapping-wrapper").html(a))},error:function(e){console.log(e)}})}),e(document).on("click",".wpwhpro-add-template-button",function(){var o=e("#wpwhpro-data-mapping-add-template-name").val();o&&e.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_add_data_mapping_template",data_mapping_name:o,ironikus_nonce:ironikus.ajax_nonce},success:function(o){var t=e.parseJSON(o);("true"===t.success||t.success===!0)&&confirm("Reload required. Want to reload now?")&&s()},error:function(e){console.log(e)}})}),e(document).on({mouseover:function(){var o=this;e(o).find(".wpwhpro-single-row-key-actions").addClass("active")},mouseleave:function(){var o=this;e(o).find(".wpwhpro-single-row-key-actions").removeClass("active")}},".wpwhpro-single-row"),e(document).on("click",".log-element",function(){var o=this,t=e(o).attr("wpwhpro-log-id"),a=e("#wpwhpro-log-content-"+t).html(),i=e("#wpwhpro-log-json-"+t).text();e("#wpwhpro-log-content").html(a),e("#wpwhpro-log-json").jsonBrowse(e.parseJSON(i))})}(jQuery),function(e){function o(e){return e instanceof Object&&Object.keys(e).length>0}function t(e){var o=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return o.test(e)}function a(e,i){if(html="","string"==typeof e)e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),html+=t(e)?'<a href="'+e+'" class="json-string">'+e+"</a>":'<span class="json-string">"'+e+'"</span>';else if("number"==typeof e)html+='<span class="json-literal">'+e+"</span>";else if("boolean"==typeof e)html+='<span class="json-literal">'+e+"</span>";else if(null===e)html+='<span class="json-literal">null</span>';else if(e instanceof Array)if(e.length>0){html+='[<ol class="json-array">';for(var n=0;n<e.length;++n)html+="<li>",o(e[n])&&(html+='<a href class="json-toggle"></a>'),html+=a(e[n],i),n<e.length-1&&(html+=","),html+="</li>";html+="</ol>]"}else html+="[]";else if("object"==typeof e){var s=Object.keys(e).length;if(s>0){html+='{<ul class="json-dict">';for(var r in e)if(e.hasOwnProperty(r)){html+="<li>";var c=i.withQuotes?'<span class="json-string">"'+r+'"</span>':r;html+=o(e[r])?'<a href class="json-toggle">'+c+"</a>":c,html+=": "+a(e[r],i),--s>0&&(html+=","),html+="</li>"}html+="</ul>}"}else html+="{}"}return html}e.fn.jsonBrowse=function(t,i){return i=i||{},this.each(function(){var n=a(t,i);o(t)&&(n='<a href class="json-toggle"></a>'+n),e(this).html(n),e(this).off("click"),e(this).on("click","a.json-toggle",function(){var o=e(this).toggleClass("collapsed").siblings("ul.json-dict, ol.json-array");if(o.toggle(),o.is(":visible"))o.siblings(".json-placeholder").remove();else{var t=o.children("li").length,a=t+(t>1?" items":" item");o.after('<a href class="json-placeholder">'+a+"</a>")}return!1}),e(this).on("click","a.json-placeholder",function(){return e(this).siblings("a.json-toggle").click(),!1}),1==i.collapsed&&e(this).find("a.json-toggle").click()})}}(jQuery);