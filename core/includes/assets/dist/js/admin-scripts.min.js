!function(o){"use strict";o(document).on("click",".ironikus-refresh",function(){location.reload()});var e=function(){var i=o(".irnks-accordion"),n=i.find(".irnks-accordion-header"),s=(o(".irnks-accordion-item"),{speed:400,oneOpen:!1});return{init:function(i){n.on("click",function(){e.toggle(o(this))}),o.extend(s,i),s.oneOpen&&o(".irnks-accordion-item.active").length>1&&o(".irnks-accordion-item.active:not(:first)").removeClass("active"),o(".irnks-accordion-item.active").find("> .irnks-accordion-body").show()},toggle:function(o){o.closest(".irnks-accordion-item").toggleClass("active"),o.next().stop().slideToggle(s.speed)}}}();o(document).ready(function(){e.init({speed:300,oneOpen:!0})}),o(".ironikus-save").on("click",function(){var e=o(this);if(!o(e).children(".ironikus-loader").hasClass("active")){o(e).children(".ironikus-save-text").toggleClass("active"),o(e).children(".ironikus-loader").toggleClass("active");var i=o(e).attr("ironikus-webhook-trigger"),n=o(e).attr("ironikus-webhook-callback"),s=o("#ironikus-webhook-url-"+i).val(),r=o("#ironikus-webhook-current-url").val();o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_add_webhook_trigger",webhook_url:s,webhook_group:i,webhook_callback:n,current_url:r,ironikus_nonce:ironikus.ajax_nonce},success:function(n){var s=o.parseJSON(n);setTimeout(function(){if(o(e).children(".ironikus-save-text").toggleClass("active"),o(e).children(".ironikus-loader").toggleClass("active"),"false"!=s.success){o(e).css({background:"#00a73f"});var n='<tr id="ironikus-webhook-id-'+s.webhook+'"><td>';n+='<input class="ironikus-webhook-input" type="text" name="ironikus_wp_webhooks_pro_webhook_url" value="'+s.webhook_url+'" readonly /><br>',n+='</td><td><div class="ironikus-element-actions">',n+='<span class="ironikus-delete" ironikus-delete="'+s.webhook+'" ironikus-group="'+s.webhook_group+'" >Delete</span><br>',n+='<span class="ironikus-refresh">Refresh for Settings</span>',""!=s.webhook_callback&&(n+='<br><span class="ironikus-send-demo" ironikus-demo-data-callback="'+s.webhook_callback+'" ironikus-webhook="'+s.webhook+'" ironikus-group="'+s.webhook_group+'" >Send demo</span>'),n+="</div></td></tr>",o(".ironikus-webhook-table.ironikus-group-"+i+" > tbody").append(n)}else o(e).css({background:"#a70000"})},200),setTimeout(function(){o(e).css({background:""})},2700)},error:function(i){setTimeout(function(){o(e).children(".ironikus-save-text").toggleClass("active"),o(e).children(".ironikus-loader").toggleClass("active"),o(e).css({background:"#a70000"})},200),setTimeout(function(){o(e).css({background:""})},2700)}})}}),o(document).on("click",".ironikus-delete",function(){if(confirm("Are you sure you want to delete this webhook?")){var e=this,i=o(e).attr("ironikus-delete"),n=o(e).attr("ironikus-group");o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_remove_webhook_trigger",webhook:i,webhook_group:n,ironikus_nonce:ironikus.ajax_nonce},success:function(e){var n=o.parseJSON(e);"false"!=n.success&&o("#ironikus-webhook-id-"+i).remove()},error:function(o){console.log(o)}})}}),o(document).on("click",".ironikus-send-demo",function(){var e=this,i=o(e).attr("ironikus-webhook"),n=o(e).attr("ironikus-group"),s=o(e).attr("ironikus-demo-data-callback");o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_test_webhook_trigger",webhook:i,webhook_group:n,webhook_callback:s,ironikus_nonce:ironikus.ajax_nonce},success:function(i){var n=o.parseJSON(i);setTimeout(function(){o(e).css("false"!=n.success?{color:"#00a73f"}:{color:"#a70000"})},200),setTimeout(function(){o(e).css({color:""})},2700)},error:function(o){console.log(o)}})}),o(document).on("click","#TB_ajaxContent .ironikus-submit-settings-form",function(e){e.preventDefault();var i=this,n=o(i).attr("webhook-id"),s=o(i).attr("webhook-group"),r=o("#ironikus-webhook-form-"+n).serialize();o(i).children(".ironikus-loader").hasClass("active")||(o(i).children(".ironikus-save-text").toggleClass("active"),o(i).children(".ironikus-loader").toggleClass("active"),o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"ironikus_save_webhook_trigger_settings",webhook_id:n,webhook_group:s,trigger_settings:r,ironikus_nonce:ironikus.ajax_nonce},success:function(e){setTimeout(function(){o(i).children(".ironikus-save-text").toggleClass("active"),o(i).children(".ironikus-loader").toggleClass("active"),o(i).css({background:"#00a73f"})},200),setTimeout(function(){o(i).css({background:""})},2700),console.log(e)},error:function(o){console.log(o)}}))})}(jQuery);