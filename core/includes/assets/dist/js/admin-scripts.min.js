!function(o){"use strict";var i=function(){var e=o(".irnks-accordion"),n=e.find(".irnks-accordion-header"),r=(o(".irnks-accordion-item"),{speed:400,oneOpen:!1});return{init:function(e){n.on("click",function(){i.toggle(o(this))}),o.extend(r,e),r.oneOpen&&o(".irnks-accordion-item.active").length>1&&o(".irnks-accordion-item.active:not(:first)").removeClass("active"),o(".irnks-accordion-item.active").find("> .irnks-accordion-body").show()},toggle:function(o){o.closest(".irnks-accordion-item").toggleClass("active"),o.next().stop().slideToggle(r.speed)}}}();o(document).ready(function(){i.init({speed:300,oneOpen:!0})}),o(".ironikus-save").on("click",function(){var i=o(this);if(!o(i).children(".ironikus-loader").hasClass("active")){o(i).children(".ironikus-save-text").toggleClass("active"),o(i).children(".ironikus-loader").toggleClass("active");var e=o(i).attr("ironikus-webhook-trigger"),n=o(i).attr("ironikus-webhook-callback"),r=o("#ironikus-webhook-url-"+e).val(),s=o("#ironikus-webhook-current-url").val();o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"wpwh_ironikus_add_webhook_trigger",webhook_url:r,webhook_group:e,webhook_callback:n,current_url:s,ironikus_nonce:ironikus.ajax_nonce},success:function(n){var r=o.parseJSON(n);setTimeout(function(){if(o(i).children(".ironikus-save-text").toggleClass("active"),o(i).children(".ironikus-loader").toggleClass("active"),"false"!=r.success){o(i).css({background:"#00a73f"});var n='<tr id="ironikus-webhook-id-'+r.webhook+'"><td>';n+='<input class="ironikus-webhook-input" type="text" name="ironikus_wp_webhooks_webhook_url" value="'+r.webhook_url+'" readonly /><br>',n+='</td><td><div class="ironikus-element-actions">',n+='<span class="ironikus-delete" ironikus-delete="'+r.webhook+'" ironikus-group="'+r.webhook_group+'" >Delete</span>',""!=r.webhook_callback&&(n+='<br><span class="ironikus-send-demo" ironikus-demo-data-callback="'+r.webhook_callback+'" ironikus-webhook="'+r.webhook+'" ironikus-group="'+r.webhook_group+'" >Send demo</span>'),n+="</div></td></tr>",o(".ironikus-webhook-table.ironikus-group-"+e+" tbody").append(n)}else o(i).css({background:"#a70000"})},200),setTimeout(function(){o(i).css({background:""})},2700)},error:function(e){setTimeout(function(){o(i).children(".ironikus-save-text").toggleClass("active"),o(i).children(".ironikus-loader").toggleClass("active"),o(i).css({background:"#a70000"})},200),setTimeout(function(){o(i).css({background:""})},2700)}})}}),o(document).on("click",".ironikus-delete",function(){var i=this,e=o(i).attr("ironikus-delete"),n=o(i).attr("ironikus-group");o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"wpwh_ironikus_remove_webhook_trigger",webhook:e,webhook_group:n,ironikus_nonce:ironikus.ajax_nonce},success:function(i){var n=o.parseJSON(i);"false"!=n.success&&o("#ironikus-webhook-id-"+e).remove()},error:function(o){console.log(o)}})}),o(document).on("click",".ironikus-send-demo",function(){var i=this,e=o(i).attr("ironikus-webhook"),n=o(i).attr("ironikus-group"),r=o(i).attr("ironikus-demo-data-callback");o.ajax({url:ironikus.ajax_url,type:"post",data:{action:"wpwh_ironikus_test_webhook_trigger",webhook:e,webhook_group:n,webhook_callback:r,ironikus_nonce:ironikus.ajax_nonce},success:function(e){console.log(e);var n=o.parseJSON(e);setTimeout(function(){o(i).css("false"!=n.success?{color:"#00a73f"}:{color:"#a70000"})},200),setTimeout(function(){o(i).css({color:""})},2700)},error:function(o){console.log(o)}})})}(jQuery);